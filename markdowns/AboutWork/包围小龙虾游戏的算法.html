<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一个包围小龙虾游戏的算法 | 凡事</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="#Just playing around#">
    <link rel="preload" href="/assets/css/0.styles.c027a158.css" as="style"><link rel="preload" href="/assets/js/app.a0a1adb3.js" as="script"><link rel="preload" href="/assets/js/2.0dd6e7dd.js" as="script"><link rel="preload" href="/assets/js/4.343ff8cb.js" as="script"><link rel="prefetch" href="/assets/js/10.5945ed9f.js"><link rel="prefetch" href="/assets/js/11.d588ef97.js"><link rel="prefetch" href="/assets/js/12.b3e9ce6e.js"><link rel="prefetch" href="/assets/js/13.9c8717ef.js"><link rel="prefetch" href="/assets/js/14.fab0c5d9.js"><link rel="prefetch" href="/assets/js/15.451d7b6a.js"><link rel="prefetch" href="/assets/js/16.3d38f1ac.js"><link rel="prefetch" href="/assets/js/17.38f1c1f0.js"><link rel="prefetch" href="/assets/js/18.916f3c88.js"><link rel="prefetch" href="/assets/js/19.c3dec4f6.js"><link rel="prefetch" href="/assets/js/20.1ae57af6.js"><link rel="prefetch" href="/assets/js/21.75a57794.js"><link rel="prefetch" href="/assets/js/22.af2c93ba.js"><link rel="prefetch" href="/assets/js/23.a5e6f284.js"><link rel="prefetch" href="/assets/js/24.a27b0ee5.js"><link rel="prefetch" href="/assets/js/25.0de76e70.js"><link rel="prefetch" href="/assets/js/26.27159596.js"><link rel="prefetch" href="/assets/js/27.c244846b.js"><link rel="prefetch" href="/assets/js/28.ed759f20.js"><link rel="prefetch" href="/assets/js/29.87c990cd.js"><link rel="prefetch" href="/assets/js/3.ec9842ff.js"><link rel="prefetch" href="/assets/js/30.6f6b045e.js"><link rel="prefetch" href="/assets/js/31.2deab325.js"><link rel="prefetch" href="/assets/js/32.002e77b1.js"><link rel="prefetch" href="/assets/js/33.b07cf5ef.js"><link rel="prefetch" href="/assets/js/34.d22c455f.js"><link rel="prefetch" href="/assets/js/35.4558c5df.js"><link rel="prefetch" href="/assets/js/36.7a3576b7.js"><link rel="prefetch" href="/assets/js/37.04be9664.js"><link rel="prefetch" href="/assets/js/38.2af350ee.js"><link rel="prefetch" href="/assets/js/39.91f64014.js"><link rel="prefetch" href="/assets/js/40.01158a50.js"><link rel="prefetch" href="/assets/js/41.08e73780.js"><link rel="prefetch" href="/assets/js/42.0f91f38f.js"><link rel="prefetch" href="/assets/js/43.d5af08f5.js"><link rel="prefetch" href="/assets/js/44.3d9ea44b.js"><link rel="prefetch" href="/assets/js/45.bd4e14c4.js"><link rel="prefetch" href="/assets/js/46.19caab72.js"><link rel="prefetch" href="/assets/js/47.a03c9748.js"><link rel="prefetch" href="/assets/js/48.5ee6bccd.js"><link rel="prefetch" href="/assets/js/49.2c7e79f4.js"><link rel="prefetch" href="/assets/js/5.2a488f4b.js"><link rel="prefetch" href="/assets/js/50.cf52fa4b.js"><link rel="prefetch" href="/assets/js/51.3a9887f6.js"><link rel="prefetch" href="/assets/js/52.9c075749.js"><link rel="prefetch" href="/assets/js/53.0755b8cf.js"><link rel="prefetch" href="/assets/js/54.bf3493ca.js"><link rel="prefetch" href="/assets/js/55.3c94d7f7.js"><link rel="prefetch" href="/assets/js/56.3994a12b.js"><link rel="prefetch" href="/assets/js/57.3be4ae97.js"><link rel="prefetch" href="/assets/js/58.3fbef599.js"><link rel="prefetch" href="/assets/js/59.bbe61e81.js"><link rel="prefetch" href="/assets/js/6.c9c3e14a.js"><link rel="prefetch" href="/assets/js/60.6aebd917.js"><link rel="prefetch" href="/assets/js/61.9f198f2a.js"><link rel="prefetch" href="/assets/js/62.1fc8f21b.js"><link rel="prefetch" href="/assets/js/63.8bd4c59e.js"><link rel="prefetch" href="/assets/js/64.bfe845f7.js"><link rel="prefetch" href="/assets/js/65.c071933d.js"><link rel="prefetch" href="/assets/js/66.d687fdc8.js"><link rel="prefetch" href="/assets/js/67.b7f5dcef.js"><link rel="prefetch" href="/assets/js/68.fac17bf6.js"><link rel="prefetch" href="/assets/js/69.ca40f774.js"><link rel="prefetch" href="/assets/js/7.bd89bcdf.js"><link rel="prefetch" href="/assets/js/70.4aa2bfe4.js"><link rel="prefetch" href="/assets/js/8.1c40fb34.js"><link rel="prefetch" href="/assets/js/9.1d4dc165.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c027a158.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">凡事</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutVue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutReact/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutJS/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutCSS/" class="nav-link">
  CSS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法与数据结构" class="dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutAlgorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutDataStructure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他技术" class="dropdown-title"><span class="title">其他技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutRegExp/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutWebpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常开发" class="dropdown-title"><span class="title">日常开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutWork/" class="nav-link router-link-active">
  H5开发
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutMe/" class="nav-link">
  关于
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutVue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutReact/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutES6/" class="nav-link">
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutJS/" class="nav-link">
  JS
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutCSS/" class="nav-link">
  CSS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法与数据结构" class="dropdown-title"><span class="title">算法与数据结构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutAlgorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutDataStructure/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他技术" class="dropdown-title"><span class="title">其他技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutRegExp/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutWebpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="日常开发" class="dropdown-title"><span class="title">日常开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/markdowns/AboutWork/" class="nav-link router-link-active">
  H5开发
</a></li><li class="dropdown-item"><!----> <a href="/markdowns/AboutMe/" class="nav-link">
  关于
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>一个包围小龙虾游戏的算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/markdowns/AboutWork/%E5%8C%85%E5%9B%B4%E5%B0%8F%E9%BE%99%E8%99%BE%E6%B8%B8%E6%88%8F%E7%9A%84%E7%AE%97%E6%B3%95.html#_1，需求：" class="sidebar-link">1，需求：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdowns/AboutWork/%E5%8C%85%E5%9B%B4%E5%B0%8F%E9%BE%99%E8%99%BE%E6%B8%B8%E6%88%8F%E7%9A%84%E7%AE%97%E6%B3%95.html#_2，需求分析：" class="sidebar-link">2，需求分析：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdowns/AboutWork/%E5%8C%85%E5%9B%B4%E5%B0%8F%E9%BE%99%E8%99%BE%E6%B8%B8%E6%88%8F%E7%9A%84%E7%AE%97%E6%B3%95.html#_3，解决思路：" class="sidebar-link">3，解决思路：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdowns/AboutWork/%E5%8C%85%E5%9B%B4%E5%B0%8F%E9%BE%99%E8%99%BE%E6%B8%B8%E6%88%8F%E7%9A%84%E7%AE%97%E6%B3%95.html#_4，部分实现代码：" class="sidebar-link">4，部分实现代码：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdowns/AboutWork/%E5%8C%85%E5%9B%B4%E5%B0%8F%E9%BE%99%E8%99%BE%E6%B8%B8%E6%88%8F%E7%9A%84%E7%AE%97%E6%B3%95.html#_5，总结：" class="sidebar-link">5，总结：</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/markdowns/AboutWork/%E5%8C%85%E5%9B%B4%E5%B0%8F%E9%BE%99%E8%99%BE%E6%B8%B8%E6%88%8F%E7%9A%84%E7%AE%97%E6%B3%95.html#_6，一些延伸" class="sidebar-link">6，一些延伸</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="一个包围小龙虾游戏的算法"><a href="#一个包围小龙虾游戏的算法" class="header-anchor">#</a> 一个包围小龙虾游戏的算法</h1> <h2 id="_1，需求："><a href="#_1，需求：" class="header-anchor">#</a> 1，需求：</h2> <p>需求如下图：</p> <img src="/assets/img/小龙虾游戏截图.d2e7719e.jpg"> <p>一个9x9的棋盘中央，有一只小龙虾，想要离开这个棋盘。
玩家可以在棋盘上任意位置放置啤酒杯，堵住小龙虾的去路。
玩家每放置一个酒杯，小龙虾会走一步。
当小龙虾到达棋盘边缘时，游戏失败。
当小龙虾没有格子可以移动时，游戏胜利。</p> <h2 id="_2，需求分析："><a href="#_2，需求分析：" class="header-anchor">#</a> 2，需求分析：</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//这个问题之前曾经在网络上流行过一段时间，游戏的名字是《围住神经喵》，后面又衍生出很多仿制品</span>

<span class="token comment">//主要核心要解决的问题是：神经喵/小龙虾 需要寻找到一条走出去的最短路径(小龙虾的AI问题)</span>
<span class="token comment">//在玩家每次放置一个物体后，神经喵/小龙虾 需要重新计算自己的最短路径，并超这个方向前进一步。</span>

<span class="token comment">//解决思路是：构建一个二维数组</span>
<span class="token comment">//这只喵目前处于坐标 x,y ，那么他能走的格子分别是:</span>
<span class="token comment">// 左边：x-1,y</span>
<span class="token comment">// 右边：x+1,y</span>
<span class="token comment">// 左上：x-(y+1)%2,y-1     //当y等于1时，左上的x和原数字相同，右上则+1 ；当y为偶数时，左上位置为x-1,右上则是x</span>
<span class="token comment">// 右上：x+(y)%2,y-1</span>
<span class="token comment">// 左下：x-(y+1)%2,y+1</span>
<span class="token comment">// 右下：x+(y)%2,y+1</span>

<span class="token comment">// 在这个案例中，我们不考虑复杂的情况（否则每走一步，需要考虑六个方向，并且可能出现绕圈的状况，还需要判断是否回到开始点等状况,需要迭代的次数呈指数型增加）</span>
<span class="token comment">// 这个游戏中，我们仅仅考虑神经喵（虾虾）朝着六个方向中任何一个方向前进，是否可以抵达棋盘的边缘</span>
<span class="token comment">// 如果六个方向都不能，则朝着空间最大的方向走一个格子。</span>
<span class="token comment">// 如果六个方向中有几个方向可以，则按离开最短的路径走</span>
<span class="token comment">// 如果找到的路径的长度是2，则最短路径就是这个</span>
</code></pre></div><h2 id="_3，解决思路："><a href="#_3，解决思路：" class="header-anchor">#</a> 3，解决思路：</h2> <p>构建9*9的二维数组。并约定：0代表空格，1代表障碍物，2代表小龙虾所处位置。</p> <p>约定小龙虾每一步前进的六个方向：左，右，左上，右上，左下，右下分别是[0，1，2，3，4，5]</p> <p>小龙虾每次移动时，会同时考虑六个直线方向是否存在出路。遇到障碍物，则代表该方向无法直接出去。如果能抵达棋盘边缘，则代表该方向是可行路径。</p> <p>用一个数组记录这六个出路的路径。再用另一个数组记录这六条路径最终的结果。</p> <p>得到这六个路径后，判断最终的结果。</p> <p>如果存在可以出去的路径，则在里面选择长度最短的那条（最快抵达地图边缘）。</p> <p>如果不存在，则选择长度最长的那条（可活动区域最大化）。</p> <img src="/assets/img/小龙虾游戏截图2.009a090e.png"> <h2 id="_4，部分实现代码："><a href="#_4，部分实现代码：" class="header-anchor">#</a> 4，部分实现代码：</h2> <h4 id="_1-遍历六个方向"><a href="#_1-遍历六个方向" class="header-anchor">#</a> 1)遍历六个方向</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">private</span> canWayOut<span class="token operator">=</span><span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//某个方向是否可以走通</span>
<span class="token keyword">private</span> currentPath<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//所有路径的集合</span>
<span class="token keyword">private</span> <span class="token function">lobsterChooseDirection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	<span class="token comment">//龙虾选择路径------选择阶段，遍历六个方向</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	
    <span class="token keyword">this</span><span class="token punctuation">.</span>canWayOut<span class="token operator">=</span><span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">]</span>	<span class="token comment">//每次选择路径前重置结果</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token punctuation">,</span>MoveDirection<span class="token punctuation">.</span><span class="token constant">LEFT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token punctuation">,</span>MoveDirection<span class="token punctuation">.</span><span class="token constant">RIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token punctuation">,</span>MoveDirection<span class="token punctuation">.</span><span class="token constant">TOP_LEFT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token punctuation">,</span>MoveDirection<span class="token punctuation">.</span><span class="token constant">TOP_RIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token punctuation">,</span>MoveDirection<span class="token punctuation">.</span><span class="token constant">BOTTOM_LEFT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token punctuation">,</span>MoveDirection<span class="token punctuation">.</span><span class="token constant">BOTTOM_RIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lobsterMove</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//根据当前路径集合，找出</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-根据特定方向寻找出路："><a href="#_2-根据特定方向寻找出路：" class="header-anchor">#</a> 2)根据特定方向寻找出路：</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code>
<span class="token keyword">private</span> <span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>direction<span class="token operator">:</span>MoveDirection</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> newx<span class="token operator">=</span>x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> newy<span class="token operator">=</span>y<span class="token punctuation">;</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>direction<span class="token punctuation">)</span><span class="token punctuation">{</span>	<span class="token comment">//这里要注意，由于棋盘是格子交错的，所以在判断x和y索引时，要注意索引x的真实位置</span>
        <span class="token keyword">case</span> MoveDirection<span class="token punctuation">.</span><span class="token constant">LEFT</span><span class="token operator">:</span>
            newx<span class="token operator">=</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            newy<span class="token operator">=</span>y<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> MoveDirection<span class="token punctuation">.</span><span class="token constant">RIGHT</span><span class="token operator">:</span>
            newx<span class="token operator">=</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            newy<span class="token operator">=</span>y<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> MoveDirection<span class="token punctuation">.</span><span class="token constant">TOP_LEFT</span><span class="token operator">:</span>
            newx<span class="token operator">=</span>x<span class="token operator">-</span><span class="token punctuation">(</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span>
            newy<span class="token operator">=</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> MoveDirection<span class="token punctuation">.</span><span class="token constant">TOP_RIGHT</span><span class="token operator">:</span>
            newx<span class="token operator">=</span>x<span class="token operator">+</span>y<span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span>
            newy<span class="token operator">=</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> MoveDirection<span class="token punctuation">.</span><span class="token constant">BOTTOM_LEFT</span><span class="token operator">:</span>
            newx<span class="token operator">=</span>x<span class="token operator">-</span><span class="token punctuation">(</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span>
            newy<span class="token operator">=</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> MoveDirection<span class="token punctuation">.</span><span class="token constant">BOTTOM_RIGHT</span><span class="token operator">:</span>
            newx<span class="token operator">=</span>x<span class="token operator">+</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">;</span>
            newy<span class="token operator">=</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//判断newx和newy的位置是否在棋盘内</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>newx<span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newx <span class="token operator">&lt;=</span><span class="token number">8</span> <span class="token operator">&amp;&amp;</span> newy <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> newy <span class="token operator">&lt;=</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">[</span>newx<span class="token punctuation">]</span><span class="token punctuation">[</span>newy<span class="token punctuation">]</span><span class="token operator">!==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token comment">//判断newx，newy所在位置有没有障碍物</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token punctuation">[</span>direction<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>newx<span class="token punctuation">,</span>newy<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findWayOutByDirection</span><span class="token punctuation">(</span>newx<span class="token punctuation">,</span>newy<span class="token punctuation">,</span>direction<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//判断下一个节点是否可以出去</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>canWayOut<span class="token punctuation">[</span>direction<span class="token punctuation">]</span><span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-根据得到的路径，选择最优的一条"><a href="#_3-根据得到的路径，选择最优的一条" class="header-anchor">#</a> 3)根据得到的路径，选择最优的一条</h4> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">private</span> <span class="token function">lobsterMove</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> exitPath<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>canWayOut<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>canWayOut<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> exitPath<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>exitPath<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">//如果能够直接出去的路径&gt;0，则从路径中找到一条最短的路径出去</span>
        <span class="token keyword">let</span> path<span class="token operator">=</span>exitPath<span class="token punctuation">;</span>
        <span class="token keyword">let</span> pathlength<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>path<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            pathlength<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> minIndex<span class="token operator">=</span>Mathf<span class="token punctuation">.</span><span class="token function">MinIndex</span><span class="token punctuation">(</span>pathlength<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> newx<span class="token operator">=</span>exitPath<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> newy<span class="token operator">=</span>exitPath<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lobsterTranstion</span><span class="token punctuation">(</span>newx<span class="token punctuation">,</span>newy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//如果一条能够直接出去的路都没有，则1:寻找一条长度最长的路径；2:判断是否已经完全没有路了，</span>
    <span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> path<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> isGameSuccess<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> isGameSuccess <span class="token operator">=</span> <span class="token boolean">false</span>
            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>isGameSuccess<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>gameResult<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
            NetManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">GameOver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameResult<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameStep<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>   
        <span class="token keyword">else</span><span class="token punctuation">{</span>   <span class="token comment">//如果仍有路径可以走，则游戏未结束</span>
            <span class="token keyword">let</span> maxIndex<span class="token operator">=</span>Mathf<span class="token punctuation">.</span><span class="token function">MaxIndex</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> newx<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token punctuation">[</span>maxIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> newy<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentPath<span class="token punctuation">[</span>maxIndex<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">lobsterTranstion</span><span class="token punctuation">(</span>newx<span class="token punctuation">,</span>newy<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>4)根据选择的结果前进一格。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token comment">//播放一个龙虾位置移动的方法</span>
<span class="token keyword">private</span> <span class="token function">lobsterTranstion</span><span class="token punctuation">(</span><span class="token parameter">newx<span class="token punctuation">,</span>newy</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//将原本的位置置为空</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>lobsterX<span class="token operator">=</span>newx<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>lobsterY<span class="token operator">=</span>newy<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">[</span>newx<span class="token punctuation">]</span><span class="token punctuation">[</span>newy<span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newx<span class="token punctuation">,</span>newy<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>newx <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> newx <span class="token operator">==</span> <span class="token number">8</span> <span class="token operator">||</span> newy <span class="token operator">==</span><span class="token number">0</span> <span class="token operator">||</span> newy <span class="token operator">==</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'已经到达边界,游戏失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        UIManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">ShowWaiting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Laya<span class="token punctuation">.</span>timer<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>NetManager<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">GameOver</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameResult<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>gameStep<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>gameResult<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> newNode<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>gamePage<span class="token punctuation">.</span>grids<span class="token punctuation">.</span>_childs<span class="token punctuation">[</span>newy<span class="token punctuation">]</span><span class="token punctuation">.</span>_childs<span class="token punctuation">[</span>newx<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> newPosX<span class="token operator">=</span>newNode<span class="token punctuation">.</span>x<span class="token operator">+</span>newNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>x<span class="token operator">+</span>newNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> newPosY<span class="token operator">=</span>newNode<span class="token punctuation">.</span>y<span class="token operator">+</span>newNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>y<span class="token operator">+</span>newNode<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    Laya<span class="token punctuation">.</span>Tween<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>gamePage<span class="token punctuation">.</span>lobster<span class="token punctuation">,</span><span class="token punctuation">{</span>x<span class="token operator">:</span>newPosX<span class="token punctuation">,</span>y<span class="token operator">:</span>newPosY<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span>Laya<span class="token punctuation">.</span>Ease<span class="token punctuation">.</span>linearNone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5，总结："><a href="#_5，总结：" class="header-anchor">#</a> 5，总结：</h2> <p>到这一步，核心逻辑已经完成。龙虾有了一定的&quot;智能&quot;，可以跟愚蠢的人类决一高下了。</p> <h2 id="_6，一些延伸"><a href="#_6，一些延伸" class="header-anchor">#</a> 6，一些延伸</h2> <p>在这个H5里，由于为了控制难度和运算量，所以在寻找路径时，其实是没有做转弯的判断的。</p> <p>比如说，如果允许小龙虾在选择路径时，考虑转弯一次的状况，那么应该怎么做？</p> <p>这时候的逻辑伴随着允许转弯次数的增加，难度也会逐渐增加。一次，两次，直至任意次。</p> <p>这里的具体算法，我没有实现，之后如果实现了，会更新在此处。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a0a1adb3.js" defer></script><script src="/assets/js/2.0dd6e7dd.js" defer></script><script src="/assets/js/4.343ff8cb.js" defer></script>
  </body>
</html>
